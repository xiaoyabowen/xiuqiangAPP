<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    	<meta name="apple-mobile-web-app-capable" content="yes">
    	<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>学生缴费-未缴费</title>
		<link rel="stylesheet" href="../../css/api.css" />
		<link rel="stylesheet" href="../../css/commonWindow.css" />
		<style type="text/css">
			body{
				min-width: 320px;
                background: #F8F8F8;
			}
            .payment-detail{
                width:100%;
                padding:12px 8px;
                box-sizing: border-box;
            }
            .outline{
                width:100%;
                height:auto;
                box-shadow: 0 2px 4px 0 rgba(90,200,225,0.30);
                border-radius: 4px;
            }
            .detail-info{
                width:100%;
                background: #FFFFFF;
                padding:20px 18px 15px;
                border-bottom: 1px solid #F0F0F0;
                box-sizing: border-box; 
            }
            .info-title>:nth-child(1){
                font-size: 16px;
                color: #505050;
                letter-spacing: 0.22px;
                line-height: 22px;
            }
            .info-title .status{
                width:46px;
                height:21px;
                font-size: 12px;
                color: #505050;
                text-align:center;
                line-height:21px;
                border: 1px solid #6CC49E;
                border-radius: 4px;
                float: right;
                box-sizing: border-box;
            }
            .info-time{
                font-size:12px;
                color:#A3A3A3;
                margin-top:6px;
            }
            .info-use{
                font-size:12px;
                color:#A3A3A3;
                margin-top:3px;
            }
            .pay-num{
                width:100%;
                background: #F8F8F8;
                border: 1px solid #F1F1F1;
                border-radius: 5px;
                margin-top:20px;
                box-sizing: border-box;
            }
            .num-detail{
                padding:12px 14px 13.5px 12px;
                box-sizing: border-box;
            }
            .num-detail ul li{
                margin-top:5px;
                display: flex;
                justify-content: space-between;
                flex-wrap: nowrap;
            }
            .num-detail ul li .li-left{
                font-size:12px;
                color:#9D9D9D;
            }
            .num-detail ul li .li-right{
                font-size:12px;
                color:#574F60;
            }
            .total{
                width:100%;
                height:33.5px;
                line-height: 33.5px;
                display: flex;
                justify-content: space-between;
                flex-wrap: nowrap;
                border-top:1px solid #E7E7E7;
                padding-left:18px;
                padding-right:14px;
                box-sizing: border-box;
            }
            .total-left{
                font-size:12px;
                color:#000000;
            }
            .total-right{
                font-size:14px;
                color:#000000;
            }
            .go-pay{
                width:150px;
                height:32px;
                margin:15px auto 0;
                font-size: 14px;
                color: #5AC8E1;
                letter-spacing: 0.11px;
                text-align:center;
                line-height:32px;
                border: 1px solid #5AC8E1;
                border-radius: 5px;
                box-sizing:border-box;
            }
		</style>
	</head>
	<body id="body" style="display: none;">
		<div class="payment-detail">
          <div class="outline" id="outline">
            <div class="detail-info">
                <div class="info-title">
                    <span>2018年春季学费</span>
                    <span class="status">正常</span>
                </div>
                <div class="info-time">
                    <span>开始时间</span>
                    <span>2018.03.01</span>
                    <span>16:26:36</span>
                </div>
                <div class="info-use">
                    <span>用途：</span>
                    <span>学费（半学期）</span>
                </div>
                <div class="pay-num">
                    <div class="num-detail">
                        <ul>
                            <li>
                                <div class="li-left">保养费</div>
                                <div class="li-right">60.00元</div>
                            </li>
                            <li>
                                <div class="li-left">伙食费</div>
                                <div class="li-right">60.00元</div>
                            </li>
                        </ul>
                    </div>
                    <div class="total">
                        <div class="total-left">总计</div>
                        <div class="total-right">120.00元</div>
                    </div>
                </div>
                <div class="go-pay">马上缴费</div>
            </div>
            <div class="detail-info">
                <div class="info-title">
                    <span>2018年春季学费</span>
                    <span class="status">正常</span>
                </div>
                <div class="info-time">
                    <span>开始时间</span>
                    <span>2018.03.01</span>
                    <span>16:26:36</span>
                </div>
                <div class="info-use">
                    <span>用途：</span>
                    <span>学费（半学期）</span>
                </div>
                <div class="pay-num">
                    <div class="num-detail">
                        <ul>
                            <li>
                                <div class="li-left">保养费</div>
                                <div class="li-right">60.00元</div>
                            </li>
                            <li>
                                <div class="li-left">伙食费</div>
                                <div class="li-right">60.00元</div>
                            </li>
                        </ul>
                    </div>
                    <div class="total">
                        <div class="total-left">总计</div>
                        <div class="total-right">120.00元</div>
                    </div>
                </div>
                <div class="go-pay">马上缴费</div>
            </div>
           </div>
        </div>
    <script id="scriptDiv1" type="text/html">
		<%for(var i = 0;i < list.length; i++){%>
	    	<div class="detail-info">
                <div class="info-title">
                    <span><%=list[i].name%></span>
                    <span class="status">正常</span>
                </div>
                <div class="info-time">
                    <span>开始时间</span>
                    <span><%=list[i].startTime%>&nbsp;</span>
                    <span><%=list[i].overtime%></span>
                </div>
                <div class="info-use">
                    <span>用途：</span>
                    <span><%=list[i].desc%></span>
                </div>
                <div class="pay-num">
                    <div class="num-detail">
                        <ul>
                        	<%for(var j = 0;j < list[i].chargeItemPrices.length; j++){%>
	                            <li>
	                                <div class="li-left"><%=list[i].chargeItemPrices[j].name%></div>
	                                <div class="li-right"><%=list[i].chargeItemPrices[j].price%></div>
	                            </li>
                            <%}%>
                        </ul>
                    </div>
                    <div class="total">
                        <div class="total-left">总计</div>
                        <div class="total-right"><%=list[i].price%>元</div>
                    </div>
                </div>
                <div class="go-pay" tapmode="itemOn" onclick="goPay('<%=list[i].id%>')">马上缴费</div>
            </div>
		<%}%>
	</script>    
	<script type="text/javascript" src="../../script/api.js"></script>
	<script type="text/javascript" src="../../script/user.js"></script>
	<script type="text/javascript" src="../../script/util.js"></script>
	<script type="text/javascript" src="../../script/kv.js"></script>
	<script type="text/javascript" src="../../script/apiCloud.js"></script>
	<script type="text/javascript" src="../../script/public.js"></script>
	<script type="text/javascript" src="../../script/template-native.js"></script>
	<script type="text/javascript" src="../../script/data.js"></script>
	<script>
		var allResults = {};
		apiready = function () {
			new datalistModel(addDataToHtml,getUserNoPayChargeItemPagerUrl,{uid:getUserInfo().cids[0]},10,5,100,true);
		};
		
		
		
		function addDataToHtml(results,append){	
			if(isNotBlack(results.length)){
				for(var i = 0;i< results.length;i++){
					allResults[results[i].id] = results[i];
					results[i].overtime = formatTimeToDayDade(results[i].overtime)
					results[i].startTime = formatTimeToDayDade(results[i].startTime)
				}
			}
			var data = {list: results};	
			var html = template('scriptDiv1',data);
			if (append) {
	            var div = document.createElement("div");
	            div.innerHTML = html;
	            document.getElementById('outline').appendChild(div);
	        } else {
	            document.getElementById('outline').innerHTML = html;
	        } 
	        api.parseTapmode(); 
	        document.getElementById("body").style.display = "block";
		}
		
		
		
		//去支付
		function goPay(id){
			openNewWindow("goPay","goPay.html",allResults[id])
		}
    </script>
    </body>
</html>