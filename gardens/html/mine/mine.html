<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>我</title>
    <link rel="stylesheet" href="../../css/api.css"/>
    <link rel="stylesheet" href="../../css/commonWindow.css"/>


    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            min-width: 320px;
            background-color: #f8f8f8;
        }

        .main {
            padding-bottom: 62px;
        }

        .tp_user {
            position: relative;
            height: 140px;
            width: 100%;
            background: url(../../image/mebg.png);
            background-repeat-y: repeat;
            background-size: cover;
            /*line-height: 130px;*/
            position: relative;
            padding: 0 18px;
            box-sizing: border-box;
            overflow: hidden;
            border-bottom: 1px solid #f0f0f0;
        }



        #name {
            float: left;
            margin-left: 12px;
            line-height: 86px;
        }

        .con {
            position: absolute;
            left: 18px;
            bottom: 15px;
            width: 100%;
            /*height: 86px;*/
            /*line-height: 86px;*/
            font-size: 16px;
            color: #484848;
            letter-spacing: 0.22px;
        }
        .userCon {
            float: left;
            display: inline-block;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #fff;
            background: #fff;
            overflow: hidden;
        }

        .operationList {
            background-color: #fff;
        }

        .operationList li, .other_operationList li {
            border-bottom: 1px solid #f0f0f0;
            height: 40px;
            line-height: 40px;
            padding-left: 20px;
            padding-right: 18px;
            position: relative;
            font-size: 16px;
            color: #505050;
            letter-spacing: 0.33px;
        }

        .operationList li:after, .other_operationList li:after {
            content: '';
            width: 7px;
            height: 14px;
            background: url(../../image/arrow_rt2.png) no-repeat;
            background-size: 100%;
            position: absolute;
            right: 18px;
            top: 50%;
            margin-top: -4px;
        }

        .operationList li:nth-last-of-type(1), .other_operationList li:nth-last-of-type(1) {
            border-bottom: 0;
        }

        .other_operationList {
            margin-top: 7px;
            background-color: #fff;
            /*margin-bottom: 62px;*/
        }

        .operationList li span, .other_operationList li span {
            position: relative;
            padding-left: 30px;
        }

        .operationList li span:before, .other_operationList li span:before {
            content: '';
            height: 20px;
            background-size: 100%;
            position: absolute;
            left: 0;
            top: 50%;
            margin-top: -9px;
        }

        .mine01 span:before {
            width: 16px;
            background: url(../../image/mine/mine01.png) no-repeat;
        }

        .mine02 span:before {
            width: 20px;
            background: url(../../image/mine/mine02.png) no-repeat;
        }

        .mine03 span:before {
            width: 18px;
            background: url(../../image/mine/mine03.png) no-repeat;
        }

        .mine04 span:before {
            width: 18px;
            background: url(../../image/mine/mine04.png) no-repeat;
        }

        .mine05 span:before {
            width: 19px;
            background: url(../../image/mine/mine010.png) no-repeat;
        }

        .mine06 span:before {
            width: 18px;
            background: url(../../image/mine/mine05.png) no-repeat;
        }

        .mine07 span:before {
            width: 18px;
            background: url(../../image/mine/mine06.png) no-repeat;
        }

        .mine08 span:before {
            width: 19px;
            background: url(../../image/mine/mine07.png) no-repeat;
        }

        .mine09 span:before {
            width: 18px;
            background: url(../../image/mine/mine09.png) no-repeat;
        }

        .mine10 span:before {
            width: 18px;
            background: url(../../image/mine/mine08.png) no-repeat;
        }

        .mine11 span:before {
            width: 18px;
            background: url(../../image/mine/mine011.png) no-repeat;
        }

        /*头像样式*/
        #userIcon {
            display: block;

        }
    </style>
</head>
<body>
<div class="mine">
    <div class="tp_user">
        <div class="con">
            <div class="userCon">
                <!--<img id='userIcon' src="../../image/teacherAvatar.png" style="width: 100%; height: 100%;border-radius: 50%" alt="" />-->
                <img id='userIcon' src="" style="" alt=""/>
                <!--<img id='userIcon' style="display:block;margin-top: -15px;margin-bottom:-15px;width: 80px;" src="" alt=""/>-->
            </div>
            <span id="name"></span>
        </div>
    </div>
    <ul class="operationList">
        <li class="mine01" onclick="openMyInformation()"><span>我的信息</span></li>
        <li class="mine02" onclick="openMyHomePage()"><span>我的主页</span></li>
        <!--<li class="mine03" onclick="openMyStudy_file()"><span>我的学习</span></li>-->
        <li class="mine04" onclick="openMyChat()"><span>我的消息</span></li>
        <li class="mine05" onclick="openTeacherMailbox02()"><span>园长信箱</span></li>
        <li class="mine06" onclick="go_mybaby_clockingin()"><span>我的考勤</span></li>
        <li class="mine07" onclick="openMyScore()"><span>我的积分</span></li>
        <li class="mine08" onclick="openSetUp()"><span>我的设置</span></li>
    </ul>
    <ul class="other_operationList">
        <li class="mine09" onclick="openHelp()"><span>帮助中心</span></li>
        <li class="mine10" onclick="openScan()"><span>园所二维码</span></li>
        <li class="mine11" onclick="openAbout()"><span>关于本系统</span></li>
    </ul>
</div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/util.js"></script>
<script type="text/javascript" src="../../script/kv.js"></script>
<script type="text/javascript" src="../../script/apiCloud.js"></script>
<script type="text/javascript" src="../../script/public.js"></script>
<script type="text/javascript" src="../../script/template-native.js"></script>
<script type="text/javascript" src="../../script/data.js"></script>
<script type="text/javascript" src="../../script/user.js"></script>
<script>
    apiready = function () {
        var userInfo = getUserInfo();
        ajaxGetWithProgress(getMyInformations, {uid: userInfo.id}, function (ret, err) {
            if (ret.data) {
                setUserInfo(ret.data);
                if (isNotBlack(ret.data) && isNotBlack(ret.data.icon)) {
                    var picList = ret.data.icon;
                    var width = 80;
                    var height = 80;
                    var obj = getImgSizeBySize(picList, width, height);
                    ret.data.style = obj.style;

                } else {
                    ret.data.icon = "../../image/user_F@2x.png";
                    ret.data.style = "width:100%;height:100%;border-radius: 50%;";
                }
                document.getElementById('userIcon').src = ret.data.icon;
                document.getElementById('userIcon').style.cssText  = ret.data.style;
                console.log(document.getElementById('userIcon'));
                document.getElementById('name').innerHTML = ret.data.name;
            }
        });
//            document.getElementById('name').innerHTML = userInfo.name;
    };


    function openMyScore() {
        openNewWindow("myScore", "../mine/myScore.html")
    }

    function openMyStudy_file() {
        openNewWindow("myStudy", "../mine/myStudy.html")
    }

    function openTeacherMailbox02() {
        openNewWindow("teacherMailboxList", "../mine/teacherMailboxList.html")
    }

    function openMyHomePage() {
        openNewWindow("myHomePage", "../mine/myHomePage.html")
    }

    function openMyInformation() {
        openNewWindow("myInformation", "../mine/myInformation.html")
    }

    //打开我的消息
    function openMyChat() {
        api.accessNative({
            name: 'openChatList',
            extra: {
                uid: getUserInfo().cids[0],
                icon: getUserInfo().icon || ""
            }
        });
    }


    function openSetUp() {
        openNewWindow("setUp", "../mine/setUp.html")
    }

    function openScan() {
        openNewWindow("scan", "../mine/scan.html")
    }

    function openAbout() {
        openNewWindow("about", "../coommon/about.html")
    }

    //打开帮助中心
    function openHelp() {
        openNewWindow("helpCenter", "helpCenter.html")
    }

    function goLogin() {
        openNewWindow("login", "../RegisterLogin/login.html")
    }

    //打开我的考勤
    function go_mybaby_clockingin() {
        openNewWindow("mybaby_clockingin", "../clockingIn/mybaby_clockingin.html")
    }


</script>
</html>
